(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{388:(e,a,t)=>{"use strict";var r=t(7985),o=t(1218),s=t(4431);let i=JSON.parse('{"welcome":"Welcome to the Cafeteria Ordering System","loginPrompt":"Click below to log in","goToLogin":"Go to Login","editInfo.title":"Edit Info","editInfo.description":"Update your details and profile picture","editInfo.save":"Save","editInfo.cancel":"Cancel","editInfo.name":"Name","editInfo.username":"Email","editInfo.password":"Password","editInfo.phone":"Phone number","editInfo.confirm":"Confirm","editInfo.alertSuccess":"Update successful!","editInfo.alertFail":"Username already in use or server error","editInfo.errorGeneric":"Something went wrong. Please try again.","editInfo.profilePreview":"Profile Preview","login":{"title":"Login","email":"Email","password":"Password","forgotPassword":"Forgot Password?","noAccount":"Don\'t have an account?","signup":"Sign Up","backHome":"← Back to Home","success":"Login successful!","invalid":"Invalid login credentials","errorGeneric":"Something went wrong. Please try again."},"cafe":{"title":"Cafe CSUF","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","welcome":"Welcome!","cafeteria":"Our Cafeteria","restaurants":"Local Restaurants","featuredMeals":"Featured Meals"},"user":{"logout":"Logout","emailLabel":"Email:","phoneLabel":"Phone:","locationLabel":"Location:","editProfile":"Edit Profile","mealSubscription":"Meal Subscription","home":"Home","subscriptionPlan":"Subscription Plan"},"admin":{"title":"Admin Menu","manageUsers":"Manage Users","editMenu":"Edit Cafeteria Menu","loading":"Loading...","updateUserInfo":"Update User Info","promoteDemoteUser":"Promote/Demote User","deleteUser":"Delete User","searchMenuItem":"Search Menu Item","addMenuItem":"Add Menu Item","updateMenuItem":"Update Menu Item","deleteMenuItem":"Delete Menu Item","input":{"usernameEmail":"Username/Email","newName":"New Name","newPassword":"New Password","username":"Username","searchName":"Search by name...","newItemName":"New Item Name","price":"Price","quantity":"Quantity","selectCategory":"Select Category","itemName":"Item Name","newPrice":"New Price","newQuantity":"New Quantity"},"button":{"updateInfo":"Update Info","updateRole":"Update Role","deleteUser":"Delete User","addItem":"Add Item","updateItem":"Update Item","deleteItem":"Delete Item"},"category":{"breakfast":"Breakfast","lunch":"Lunch","dinner":"Dinner","dessert":"Dessert","drink":"Drink"}},"cafeteria":{"logo":"Cafe CSUF","history":"History","loyalty":"Loyalty Points","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","menuTitle":"Cafeteria Menu","add":"Add","remove":"Remove","addedToCart":"Added one {{item}} to cart.","removedFromCart":"All {{item}} items removed from cart."},"home":{"logo":"Cafe CSUF","history":"History","loyalty":"Loyalty Points","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","welcome":"Welcome!","ourCafeteria":"Our Cafeteria","localRestaurants":"Local Restaurants","featuredMeals":"Featured Meals"},"signup":{"title":"Sign Up","email":"Email","password":"Password","confirmPassword":"Confirm Password","createAccount":"Create Account","backToHome":"← Back to Home","passwordMismatch":"Passwords do not match!","successMessage":"Account created for {{email}}","registrationFailed":"Registration failed!"},"forgotPassword":{"title":"Forgot Password","emailPlaceholder":"Enter your email","resetButton":"Reset Password","backToHome":"← Back to Home","resetConfirmation":"Password reset link sent to {{email}}"},"restaurantMenu":{"logo":"Cafe CSUF","history":"History","loyalty":"Loyalty Points","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","title":"Restaurant Menu","add":"Add","remove":"Remove","addedToCart":"Added one {{name}} to cart.","removedFromCart":"All {{name}} items removed from cart."},"pastOrders":{"title":"Past Orders","noOrders":"You have no past orders.","orderId":"Order ID:","total":"Total:","viewDetails":"View Details","home":"Home"},"loyalty":{"title":"Loyalty Rewards","back":"Back to Menu","loading":"Loading loyalty points...","rewardBanner":"\uD83C\uDF81 Loyalty Reward: Earn 50 points to get $5 off your next order!","points":"You have {{points}} points!","keepOrdering":"Keep ordering to earn more rewards.","eligible":"You’re eligible for $5 off!","redeemButton":"Redeem 50 Points","earnMore":"Earn {{needed}} more points to unlock $5 off!","historyTitle":"Points History","noHistory":"No point history available.","order":"Order #{{id}}","statusAndTotal":"Status: {{status}} • ${{total}} spent","pointsEarned":"+{{pts}} pts","successRedeem":"\uD83C\uDF89 $5 off reward redeemed!","alreadyRedeemed":"Discount already applied!"},"cart":{"backToMenu":"Back to Menu","title":"Your Cart","empty":"Your cart is empty.","qty":"Qty:","delete":"Delete","specialRequest":"Special Request","placeholder":"ex: No onions, no pickles...","subtotal":"Subtotal","tax":"Tax (10%)","subscriptionDiscount":"Subscription Discount (15%)","pointDiscount":"Point Discount","total":"Total","checkout":"Proceed to Checkout","removeError":"Error removing specific item from cart.","customizationError":"Error updating customization in cart.","fetchError":"Error fetching cart items:","updateError":"Error updating cart:"},"checkout":{"title":"Checkout","fullName":"Full Name","streetAddress":"Street Address","city":"City","state":"State","zipCode":"Zip Code","zipCodeError":"Zip Code must be 5 digits","cardNumber":"Card Number","cardNumberError":"Card number must be 16 digits","expiryDate":"Expiry Date (MM/YY)","expiryDateError":"Expiry date must be in MM/YY format","cvv":"CVV","cvvError":"CVV must be 3 digits","delivery":"Delivery Floor and Room","placeOrder":"Place Order","backToCart":"← Back to Cart","inventoryError":"Not enough items in cafeteria inventory to fulfill order. Please lower quantity.","genericError":"An error occurred. Please try again.","unexpectedResponse":"Unexpected response"},"tracking":{"title":"Order Tracking","backToMenu":"Back to Menu","orderItems":"Order Items","loadingItems":"Loading order items...","qty":"Qty:","totalLabel":"Total (incl. tax and promotions)","loading":"Loading...","statusTitle":"Current Status","statusUpdate":"Order status updated: {{status}}","statusError":"Failed to update order status","loadError":"Failed to load order items"}}'),n=JSON.parse('{"welcome":"Bienvenido al sistema de pedidos de la cafeter\xeda","loginPrompt":"Haz clic abajo para iniciar sesi\xf3n","goToLogin":"Ir a Iniciar Sesi\xf3n","editInfo.title":"Editar informaci\xf3n","editInfo.description":"Actualiza tus datos y foto de perfil","editInfo.save":"Guardar","editInfo.cancel":"Cancelar","editInfo.name":"Nombre","editInfo.username":"Correo electr\xf3nico","editInfo.password":"Contrase\xf1a","editInfo.phone":"N\xfamero de tel\xe9fono","editInfo.confirm":"Confirmar","editInfo.alertSuccess":"\xa1Actualizaci\xf3n exitosa!","editInfo.alertFail":"Nombre de usuario ya en uso o error del servidor","editInfo.errorGeneric":"Algo sali\xf3 mal. Por favor, intenta de nuevo.","editInfo.profilePreview":"Vista previa del perfil","login":{"title":"Iniciar Sesi\xf3n","email":"Correo Electr\xf3nico","password":"Contrase\xf1a","forgotPassword":"\xbfOlvidaste tu contrase\xf1a?","noAccount":"\xbfNo tienes una cuenta?","signup":"Reg\xedstrate","backHome":"← Volver al Inicio","success":"\xa1Inicio de sesi\xf3n exitoso!","invalid":"Credenciales inv\xe1lidas","errorGeneric":"Algo sali\xf3 mal. Por favor, int\xe9ntalo de nuevo."},"cafe":{"title":"Cafeter\xeda CSUF","searchPlaceholder":"Busca algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","welcome":"\xa1Bienvenido!","cafeteria":"Nuestra Cafeter\xeda","restaurants":"Restaurantes Locales","featuredMeals":"Comidas Destacadas"},"user":{"logout":"Cerrar sesi\xf3n","emailLabel":"Correo electr\xf3nico:","phoneLabel":"Tel\xe9fono:","locationLabel":"Ubicaci\xf3n:","editProfile":"Editar perfil","mealSubscription":"Suscripci\xf3n de comida","home":"Inicio","subscriptionPlan":"Plan de suscripci\xf3n"},"admin":{"title":"Men\xfa de Administraci\xf3n","manageUsers":"Gestionar Usuarios","editMenu":"Editar Men\xfa de la Cafeter\xeda","loading":"Cargando...","updateUserInfo":"Actualizar Informaci\xf3n del Usuario","promoteDemoteUser":"Promover / Degradar Usuario","deleteUser":"Eliminar Usuario","searchMenuItem":"Buscar Elemento del Men\xfa","addMenuItem":"Agregar Elemento al Men\xfa","updateMenuItem":"Actualizar Elemento del Men\xfa","deleteMenuItem":"Eliminar Elemento del Men\xfa","input":{"usernameEmail":"Usuario/Correo Electr\xf3nico","newName":"Nuevo Nombre","newPassword":"Nueva Contrase\xf1a","username":"Nombre de Usuario","searchName":"Buscar por nombre...","newItemName":"Nombre del Nuevo Elemento","price":"Precio","quantity":"Cantidad","selectCategory":"Seleccionar Categor\xeda","itemName":"Nombre del Elemento","newPrice":"Nuevo Precio","newQuantity":"Nueva Cantidad"},"button":{"updateInfo":"Actualizar Informaci\xf3n","updateRole":"Actualizar Rol","deleteUser":"Eliminar Usuario","addItem":"Agregar Elemento","updateItem":"Actualizar Elemento","deleteItem":"Eliminar Elemento"},"category":{"breakfast":"Desayuno","lunch":"Almuerzo","dinner":"Cena","dessert":"Postre","drink":"Bebida"}},"cafeteria":{"logo":"Caf\xe9 CSUF","history":"Historial","loyalty":"Puntos de Fidelidad","searchPlaceholder":"Buscar algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","menuTitle":"Men\xfa de la Cafeter\xeda","add":"Agregar","remove":"Eliminar","addedToCart":"Se agreg\xf3 un {{item}} al carrito.","removedFromCart":"Todos los art\xedculos de {{item}} fueron eliminados del carrito."},"home":{"logo":"Caf\xe9 CSUF","history":"Historial","loyalty":"Puntos de Fidelidad","searchPlaceholder":"Buscar algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","welcome":"\xa1Bienvenido!","ourCafeteria":"Nuestra Cafeter\xeda","localRestaurants":"Restaurantes Locales","featuredMeals":"Comidas Destacadas"},"signup":{"title":"Registrarse","email":"Correo electr\xf3nico","password":"Contrase\xf1a","confirmPassword":"Confirmar contrase\xf1a","createAccount":"Crear cuenta","backToHome":"← Volver al inicio","passwordMismatch":"\xa1Las contrase\xf1as no coinciden!","successMessage":"Cuenta creada para {{email}}","registrationFailed":"\xa1Error al registrarse!"},"forgotPassword":{"title":"Olvid\xe9 mi contrase\xf1a","emailPlaceholder":"Introduce tu correo electr\xf3nico","resetButton":"Restablecer contrase\xf1a","backToHome":"← Volver al inicio","resetConfirmation":"Enlace de restablecimiento de contrase\xf1a enviado a {{email}}"},"restaurantMenu":{"logo":"Cafeter\xeda CSUF","history":"Historial","loyalty":"Puntos de fidelidad","searchPlaceholder":"Busca algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","title":"Men\xfa del restaurante","add":"Agregar","remove":"Eliminar","addedToCart":"Se agreg\xf3 un {{name}} al carrito.","removedFromCart":"Todos los art\xedculos de {{name}} fueron eliminados del carrito."},"pastOrders":{"title":"Pedidos Anteriores","noOrders":"No tienes pedidos anteriores.","orderId":"ID del pedido:","total":"Total:","viewDetails":"Ver detalles","home":"Inicio"},"loyalty":{"title":"Recompensas de Lealtad","back":"Volver al Men\xfa","loading":"Cargando puntos de lealtad...","rewardBanner":"\uD83C\uDF81 Recompensa de Lealtad: \xa1Gana 50 puntos y obt\xe9n $5 de descuento en tu pr\xf3ximo pedido!","points":"Tienes {{points}} puntos.","keepOrdering":"Sigue ordenando para ganar m\xe1s recompensas.","eligible":"\xa1Eres elegible para $5 de descuento!","redeemButton":"Canjear 50 puntos","earnMore":"Gana {{needed}} puntos m\xe1s para desbloquear $5 de descuento.","historyTitle":"Historial de Puntos","noHistory":"No hay historial de puntos disponible.","order":"Pedido #{{id}}","statusAndTotal":"Estado: {{status}} • ${{total}} gastados","pointsEarned":"+{{pts}} pts","successRedeem":"\uD83C\uDF89 \xa1Recompensa de $5 canjeada!","alreadyRedeemed":"\xa1Descuento ya aplicado!"},"cart":{"backToMenu":"Volver al men\xfa","title":"Tu carrito","empty":"Tu carrito est\xe1 vac\xedo.","qty":"Cantidad:","delete":"Eliminar","specialRequest":"Solicitud especial","placeholder":"ej: Sin cebolla, sin pepinillos...","subtotal":"Subtotal","tax":"Impuesto (10%)","subscriptionDiscount":"Descuento por suscripci\xf3n (15%)","pointDiscount":"Descuento de puntos","total":"Total","checkout":"Proceder al pago","removeError":"Error al eliminar el art\xedculo del carrito.","customizationError":"Error al actualizar la personalizaci\xf3n en el carrito.","fetchError":"Error al obtener art\xedculos del carrito:","updateError":"Error al actualizar el carrito:"},"checkout":{"title":"Pagar","fullName":"Nombre completo","streetAddress":"Direcci\xf3n","city":"Ciudad","state":"Estado","zipCode":"C\xf3digo postal","zipCodeError":"El c\xf3digo postal debe tener 5 d\xedgitos","cardNumber":"N\xfamero de tarjeta","cardNumberError":"El n\xfamero de tarjeta debe tener 16 d\xedgitos","expiryDate":"Fecha de expiraci\xf3n (MM/AA)","expiryDateError":"La fecha de expiraci\xf3n debe tener formato MM/AA","cvv":"CVV","cvvError":"El CVV debe tener 3 d\xedgitos","delivery":"Piso y sala de entrega","placeOrder":"Realizar pedido","backToCart":"← Volver al carrito","inventoryError":"No hay suficientes art\xedculos en el inventario de la cafeter\xeda para completar el pedido. Por favor, reduce la cantidad.","genericError":"Ocurri\xf3 un error. Int\xe9ntalo de nuevo.","unexpectedResponse":"Respuesta inesperada"},"tracking":{"title":"Seguimiento de Pedido","backToMenu":"Volver al Men\xfa","orderItems":"Art\xedculos del Pedido","loadingItems":"Cargando art\xedculos del pedido...","qty":"Cant:","totalLabel":"Total (incluye impuestos y promociones)","loading":"Cargando...","statusTitle":"Estado Actual","statusUpdate":"Estado del pedido actualizado: {{status}}","statusError":"Error al actualizar el estado del pedido","loadError":"Error al cargar los art\xedculos del pedido"}}');r.Ay.use(s.A).use(o.r9).init({resources:{en:{translation:i},es:{translation:n}},fallbackLng:"en",interpolation:{escapeValue:!1},returnNull:!1,detection:{order:["localStorage","navigator"],caches:["localStorage"]}})},2843:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var r=t(5155),o=t(2115),s=t(3464),i=t(5695),n=t(1218);function l(){let{t:e,i18n:a}=(0,n.Bd)();a.isInitialized||a.changeLanguage("en");let[t,l]=(0,o.useState)([]),[d,c]=(0,o.useState)(null),[u,m]=(0,o.useState)(!1),[p,f]=(0,o.useState)(0),[g,h]=(0,o.useState)(0),y=(0,i.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:8080/cartread",{method:"GET",credentials:"include"}),a=await e.json();l(a),m(!0);let t=await fetch("http://localhost:8080/currentuserread",{method:"GET",credentials:"include"}),r=await t.json();f(r.subscribed),h(r.pointDiscount)}catch(e){console.error("Error fetching cart items:",e)}})()},[]);let C=async(e,a)=>{try{await s.A.post("http://localhost:8080/cartupdate",{id:e.id,quantity:a},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){console.error("Error updating cart:",e)}l(t=>t.map(t=>t.id===e.id?{...t,quantity:a}:t))},b=async(e,a)=>{try{await s.A.post("http://localhost:8080/cartcustomupdate",{id:e,customization:a},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){console.error("Error updating customization in cart.",e)}l(t=>t.map(t=>t.id===e?{...t,customization:a}:t))},v=t.reduce((e,a)=>e+a.price*a.quantity,0),x=.1*v,E=v+x;1===p&&(E-=.15*E),1===g&&(E-=5),E<0&&(E=0),(0,o.useEffect)(()=>{u&&d!==E&&(async()=>{try{await s.A.post("http://localhost:8080/updatetotal",{cartTotal:E},{headers:{"Content-Type":"application/json"},withCredentials:!0}),c(E)}catch(e){console.error("Error updating cart total:",e)}})()},[E,d,u]),(0,o.useEffect)(()=>{u&&0===t.length&&alert("Your cart is empty.")},[t,u]);let w=async()=>{try{await s.A.post("http://localhost:8080/updatetotal",{cartTotal:E},{headers:{"Content-Type":"application/json"},withCredentials:!0}),y.push("/checkout")}catch(e){console.error("Error updating cart total.")}},N=async e=>{try{await s.A.post("http://localhost:8080/cartitemdelete",{id:e.id},{withCredentials:!0})}catch(e){console.error("Error removing specific item from cart.",e)}l(a=>a.filter(a=>a.id!==e.id))};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("a",{href:"/dashboard",className:"text-sm font-medium text-blue-600 hover:underline",children:e("cart.backToMenu")})}),(0,r.jsxs)("h1",{className:"text-3xl font-bold",children:[" ",e("cart.title")]}),(0,r.jsx)("div",{className:"space-y-4",children:0===t.length?(0,r.jsx)("p",{children:e("cart.empty")}):t.map(a=>{var t;return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:a.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)("label",{className:"text-sm text-gray-500",children:e("cart.qty")}),(0,r.jsx)("input",{type:"number",min:1,value:a.quantity,onChange:e=>C(a,parseInt(e.target.value)||1),className:"w-16 p-1 text-center border rounded"})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[(0,r.jsxs)("p",{className:"font-semibold",children:["$",(a.price*a.quantity).toFixed(2)]}),(0,r.jsx)("button",{className:"text-sm text-red-600 hover:underline mt-1",onClick:()=>N(a),children:e("cart.delete")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm block mb-1 text-gray-500",children:e("cart.specialRequest")}),(0,r.jsx)("input",{type:"text",value:null!=(t=a.customization)?t:"",onChange:e=>b(a.id,e.target.value),placeholder:e("cart.placeholder"),className:"w-full p-2 border rounded text-sm"})]})]},a.id)})}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl space-y-2 shadow-inner",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:e("cart.subtotal")}),(0,r.jsxs)("span",{children:["$",v.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:e("cart.tax")}),(0,r.jsxs)("span",{children:["$",x.toFixed(2)]})]}),1===p&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,r.jsx)("span",{children:e("cart.subscriptionDiscount")}),(0,r.jsxs)("span",{children:["-$",(.15*v).toFixed(2)]})]}),1===g&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,r.jsx)("span",{children:e("cart.pointDiscount")}),(0,r.jsxs)("span",{children:["-$",5]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,r.jsx)("span",{children:e("cart.total")}),(0,r.jsxs)("span",{children:["$",E.toFixed(2)]})]})]}),t.length>0&&(0,r.jsx)("button",{className:"w-full bg-black text-white py-3 rounded-xl font-semibold hover:bg-gray-800 transition",onClick:w,children:e("cart.checkout")})]})}t(388)},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},6748:(e,a,t)=>{Promise.resolve().then(t.bind(t,2843))}},e=>{var a=a=>e(e.s=a);e.O(0,[464,916,441,684,358],()=>a(6748)),_N_E=e.O()}]);
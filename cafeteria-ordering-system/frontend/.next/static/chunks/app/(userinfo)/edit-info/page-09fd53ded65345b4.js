(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{388:(e,a,r)=>{"use strict";var t=r(7985),o=r(1218),n=r(4431);let s=JSON.parse('{"welcome":"Welcome to the Cafeteria Ordering System","loginPrompt":"Click below to log in","goToLogin":"Go to Login","editInfo.title":"Edit Info","editInfo.description":"Update your details and profile picture","editInfo.save":"Save","editInfo.cancel":"Cancel","editInfo.name":"Name","editInfo.username":"Email","editInfo.password":"Password","editInfo.phone":"Phone number","editInfo.confirm":"Confirm","editInfo.alertSuccess":"Update successful!","editInfo.alertFail":"Username already in use or server error","editInfo.errorGeneric":"Something went wrong. Please try again.","editInfo.profilePreview":"Profile Preview","login":{"title":"Login","email":"Email","password":"Password","forgotPassword":"Forgot Password?","noAccount":"Don\'t have an account?","signup":"Sign Up","backHome":"← Back to Home","success":"Login successful!","invalid":"Invalid login credentials","errorGeneric":"Something went wrong. Please try again."},"cafe":{"title":"Cafe CSUF","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","welcome":"Welcome!","cafeteria":"Our Cafeteria","restaurants":"Local Restaurants","featuredMeals":"Featured Meals"},"user":{"logout":"Logout","emailLabel":"Email:","phoneLabel":"Phone:","locationLabel":"Location:","editProfile":"Edit Profile","mealSubscription":"Meal Subscription","home":"Home","subscriptionPlan":"Subscription Plan"},"admin":{"title":"Admin Menu","manageUsers":"Manage Users","editMenu":"Edit Cafeteria Menu","loading":"Loading...","updateUserInfo":"Update User Info","promoteDemoteUser":"Promote/Demote User","deleteUser":"Delete User","searchMenuItem":"Search Menu Item","addMenuItem":"Add Menu Item","updateMenuItem":"Update Menu Item","deleteMenuItem":"Delete Menu Item","input":{"usernameEmail":"Username/Email","newName":"New Name","newPassword":"New Password","username":"Username","searchName":"Search by name...","newItemName":"New Item Name","price":"Price","quantity":"Quantity","selectCategory":"Select Category","itemName":"Item Name","newPrice":"New Price","newQuantity":"New Quantity"},"button":{"updateInfo":"Update Info","updateRole":"Update Role","deleteUser":"Delete User","addItem":"Add Item","updateItem":"Update Item","deleteItem":"Delete Item"},"category":{"breakfast":"Breakfast","lunch":"Lunch","dinner":"Dinner","dessert":"Dessert","drink":"Drink"}},"cafeteria":{"logo":"Cafe CSUF","history":"History","loyalty":"Loyalty Points","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","menuTitle":"Cafeteria Menu","add":"Add","remove":"Remove","addedToCart":"Added one {{item}} to cart.","removedFromCart":"All {{item}} items removed from cart."},"home":{"logo":"Cafe CSUF","history":"History","loyalty":"Loyalty Points","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","welcome":"Welcome!","ourCafeteria":"Our Cafeteria","localRestaurants":"Local Restaurants","featuredMeals":"Featured Meals"},"signup":{"title":"Sign Up","email":"Email","password":"Password","confirmPassword":"Confirm Password","createAccount":"Create Account","backToHome":"← Back to Home","passwordMismatch":"Passwords do not match!","successMessage":"Account created for {{email}}","registrationFailed":"Registration failed!"},"forgotPassword":{"title":"Forgot Password","emailPlaceholder":"Enter your email","resetButton":"Reset Password","backToHome":"← Back to Home","resetConfirmation":"Password reset link sent to {{email}}"},"restaurantMenu":{"logo":"Cafe CSUF","history":"History","loyalty":"Loyalty Points","searchPlaceholder":"Search for something...","loading":"Loading...","noResults":"No results found","cart":"Cart","account":"Account","title":"Restaurant Menu","add":"Add","remove":"Remove","addedToCart":"Added one {{name}} to cart.","removedFromCart":"All {{name}} items removed from cart."},"pastOrders":{"title":"Past Orders","noOrders":"You have no past orders.","orderId":"Order ID:","total":"Total:","viewDetails":"View Details","home":"Home"},"loyalty":{"title":"Loyalty Rewards","back":"Back to Menu","loading":"Loading loyalty points...","rewardBanner":"\uD83C\uDF81 Loyalty Reward: Earn 50 points to get $5 off your next order!","points":"You have {{points}} points!","keepOrdering":"Keep ordering to earn more rewards.","eligible":"You’re eligible for $5 off!","redeemButton":"Redeem 50 Points","earnMore":"Earn {{needed}} more points to unlock $5 off!","historyTitle":"Points History","noHistory":"No point history available.","order":"Order #{{id}}","statusAndTotal":"Status: {{status}} • ${{total}} spent","pointsEarned":"+{{pts}} pts","successRedeem":"\uD83C\uDF89 $5 off reward redeemed!","alreadyRedeemed":"Discount already applied!"},"cart":{"backToMenu":"Back to Menu","title":"Your Cart","empty":"Your cart is empty.","qty":"Qty:","delete":"Delete","specialRequest":"Special Request","placeholder":"ex: No onions, no pickles...","subtotal":"Subtotal","tax":"Tax (10%)","subscriptionDiscount":"Subscription Discount (15%)","pointDiscount":"Point Discount","total":"Total","checkout":"Proceed to Checkout","removeError":"Error removing specific item from cart.","customizationError":"Error updating customization in cart.","fetchError":"Error fetching cart items:","updateError":"Error updating cart:"},"checkout":{"title":"Checkout","fullName":"Full Name","streetAddress":"Street Address","city":"City","state":"State","zipCode":"Zip Code","zipCodeError":"Zip Code must be 5 digits","cardNumber":"Card Number","cardNumberError":"Card number must be 16 digits","expiryDate":"Expiry Date (MM/YY)","expiryDateError":"Expiry date must be in MM/YY format","cvv":"CVV","cvvError":"CVV must be 3 digits","delivery":"Delivery Floor and Room","placeOrder":"Place Order","backToCart":"← Back to Cart","inventoryError":"Not enough items in cafeteria inventory to fulfill order. Please lower quantity.","genericError":"An error occurred. Please try again.","unexpectedResponse":"Unexpected response"},"tracking":{"title":"Order Tracking","backToMenu":"Back to Menu","orderItems":"Order Items","loadingItems":"Loading order items...","qty":"Qty:","totalLabel":"Total (incl. tax and promotions)","loading":"Loading...","statusTitle":"Current Status","statusUpdate":"Order status updated: {{status}}","statusError":"Failed to update order status","loadError":"Failed to load order items"}}'),i=JSON.parse('{"welcome":"Bienvenido al sistema de pedidos de la cafeter\xeda","loginPrompt":"Haz clic abajo para iniciar sesi\xf3n","goToLogin":"Ir a Iniciar Sesi\xf3n","editInfo.title":"Editar informaci\xf3n","editInfo.description":"Actualiza tus datos y foto de perfil","editInfo.save":"Guardar","editInfo.cancel":"Cancelar","editInfo.name":"Nombre","editInfo.username":"Correo electr\xf3nico","editInfo.password":"Contrase\xf1a","editInfo.phone":"N\xfamero de tel\xe9fono","editInfo.confirm":"Confirmar","editInfo.alertSuccess":"\xa1Actualizaci\xf3n exitosa!","editInfo.alertFail":"Nombre de usuario ya en uso o error del servidor","editInfo.errorGeneric":"Algo sali\xf3 mal. Por favor, intenta de nuevo.","editInfo.profilePreview":"Vista previa del perfil","login":{"title":"Iniciar Sesi\xf3n","email":"Correo Electr\xf3nico","password":"Contrase\xf1a","forgotPassword":"\xbfOlvidaste tu contrase\xf1a?","noAccount":"\xbfNo tienes una cuenta?","signup":"Reg\xedstrate","backHome":"← Volver al Inicio","success":"\xa1Inicio de sesi\xf3n exitoso!","invalid":"Credenciales inv\xe1lidas","errorGeneric":"Algo sali\xf3 mal. Por favor, int\xe9ntalo de nuevo."},"cafe":{"title":"Cafeter\xeda CSUF","searchPlaceholder":"Busca algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","welcome":"\xa1Bienvenido!","cafeteria":"Nuestra Cafeter\xeda","restaurants":"Restaurantes Locales","featuredMeals":"Comidas Destacadas"},"user":{"logout":"Cerrar sesi\xf3n","emailLabel":"Correo electr\xf3nico:","phoneLabel":"Tel\xe9fono:","locationLabel":"Ubicaci\xf3n:","editProfile":"Editar perfil","mealSubscription":"Suscripci\xf3n de comida","home":"Inicio","subscriptionPlan":"Plan de suscripci\xf3n"},"admin":{"title":"Men\xfa de Administraci\xf3n","manageUsers":"Gestionar Usuarios","editMenu":"Editar Men\xfa de la Cafeter\xeda","loading":"Cargando...","updateUserInfo":"Actualizar Informaci\xf3n del Usuario","promoteDemoteUser":"Promover / Degradar Usuario","deleteUser":"Eliminar Usuario","searchMenuItem":"Buscar Elemento del Men\xfa","addMenuItem":"Agregar Elemento al Men\xfa","updateMenuItem":"Actualizar Elemento del Men\xfa","deleteMenuItem":"Eliminar Elemento del Men\xfa","input":{"usernameEmail":"Usuario/Correo Electr\xf3nico","newName":"Nuevo Nombre","newPassword":"Nueva Contrase\xf1a","username":"Nombre de Usuario","searchName":"Buscar por nombre...","newItemName":"Nombre del Nuevo Elemento","price":"Precio","quantity":"Cantidad","selectCategory":"Seleccionar Categor\xeda","itemName":"Nombre del Elemento","newPrice":"Nuevo Precio","newQuantity":"Nueva Cantidad"},"button":{"updateInfo":"Actualizar Informaci\xf3n","updateRole":"Actualizar Rol","deleteUser":"Eliminar Usuario","addItem":"Agregar Elemento","updateItem":"Actualizar Elemento","deleteItem":"Eliminar Elemento"},"category":{"breakfast":"Desayuno","lunch":"Almuerzo","dinner":"Cena","dessert":"Postre","drink":"Bebida"}},"cafeteria":{"logo":"Caf\xe9 CSUF","history":"Historial","loyalty":"Puntos de Fidelidad","searchPlaceholder":"Buscar algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","menuTitle":"Men\xfa de la Cafeter\xeda","add":"Agregar","remove":"Eliminar","addedToCart":"Se agreg\xf3 un {{item}} al carrito.","removedFromCart":"Todos los art\xedculos de {{item}} fueron eliminados del carrito."},"home":{"logo":"Caf\xe9 CSUF","history":"Historial","loyalty":"Puntos de Fidelidad","searchPlaceholder":"Buscar algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","welcome":"\xa1Bienvenido!","ourCafeteria":"Nuestra Cafeter\xeda","localRestaurants":"Restaurantes Locales","featuredMeals":"Comidas Destacadas"},"signup":{"title":"Registrarse","email":"Correo electr\xf3nico","password":"Contrase\xf1a","confirmPassword":"Confirmar contrase\xf1a","createAccount":"Crear cuenta","backToHome":"← Volver al inicio","passwordMismatch":"\xa1Las contrase\xf1as no coinciden!","successMessage":"Cuenta creada para {{email}}","registrationFailed":"\xa1Error al registrarse!"},"forgotPassword":{"title":"Olvid\xe9 mi contrase\xf1a","emailPlaceholder":"Introduce tu correo electr\xf3nico","resetButton":"Restablecer contrase\xf1a","backToHome":"← Volver al inicio","resetConfirmation":"Enlace de restablecimiento de contrase\xf1a enviado a {{email}}"},"restaurantMenu":{"logo":"Cafeter\xeda CSUF","history":"Historial","loyalty":"Puntos de fidelidad","searchPlaceholder":"Busca algo...","loading":"Cargando...","noResults":"No se encontraron resultados","cart":"Carrito","account":"Cuenta","title":"Men\xfa del restaurante","add":"Agregar","remove":"Eliminar","addedToCart":"Se agreg\xf3 un {{name}} al carrito.","removedFromCart":"Todos los art\xedculos de {{name}} fueron eliminados del carrito."},"pastOrders":{"title":"Pedidos Anteriores","noOrders":"No tienes pedidos anteriores.","orderId":"ID del pedido:","total":"Total:","viewDetails":"Ver detalles","home":"Inicio"},"loyalty":{"title":"Recompensas de Lealtad","back":"Volver al Men\xfa","loading":"Cargando puntos de lealtad...","rewardBanner":"\uD83C\uDF81 Recompensa de Lealtad: \xa1Gana 50 puntos y obt\xe9n $5 de descuento en tu pr\xf3ximo pedido!","points":"Tienes {{points}} puntos.","keepOrdering":"Sigue ordenando para ganar m\xe1s recompensas.","eligible":"\xa1Eres elegible para $5 de descuento!","redeemButton":"Canjear 50 puntos","earnMore":"Gana {{needed}} puntos m\xe1s para desbloquear $5 de descuento.","historyTitle":"Historial de Puntos","noHistory":"No hay historial de puntos disponible.","order":"Pedido #{{id}}","statusAndTotal":"Estado: {{status}} • ${{total}} gastados","pointsEarned":"+{{pts}} pts","successRedeem":"\uD83C\uDF89 \xa1Recompensa de $5 canjeada!","alreadyRedeemed":"\xa1Descuento ya aplicado!"},"cart":{"backToMenu":"Volver al men\xfa","title":"Tu carrito","empty":"Tu carrito est\xe1 vac\xedo.","qty":"Cantidad:","delete":"Eliminar","specialRequest":"Solicitud especial","placeholder":"ej: Sin cebolla, sin pepinillos...","subtotal":"Subtotal","tax":"Impuesto (10%)","subscriptionDiscount":"Descuento por suscripci\xf3n (15%)","pointDiscount":"Descuento de puntos","total":"Total","checkout":"Proceder al pago","removeError":"Error al eliminar el art\xedculo del carrito.","customizationError":"Error al actualizar la personalizaci\xf3n en el carrito.","fetchError":"Error al obtener art\xedculos del carrito:","updateError":"Error al actualizar el carrito:"},"checkout":{"title":"Pagar","fullName":"Nombre completo","streetAddress":"Direcci\xf3n","city":"Ciudad","state":"Estado","zipCode":"C\xf3digo postal","zipCodeError":"El c\xf3digo postal debe tener 5 d\xedgitos","cardNumber":"N\xfamero de tarjeta","cardNumberError":"El n\xfamero de tarjeta debe tener 16 d\xedgitos","expiryDate":"Fecha de expiraci\xf3n (MM/AA)","expiryDateError":"La fecha de expiraci\xf3n debe tener formato MM/AA","cvv":"CVV","cvvError":"El CVV debe tener 3 d\xedgitos","delivery":"Piso y sala de entrega","placeOrder":"Realizar pedido","backToCart":"← Volver al carrito","inventoryError":"No hay suficientes art\xedculos en el inventario de la cafeter\xeda para completar el pedido. Por favor, reduce la cantidad.","genericError":"Ocurri\xf3 un error. Int\xe9ntalo de nuevo.","unexpectedResponse":"Respuesta inesperada"},"tracking":{"title":"Seguimiento de Pedido","backToMenu":"Volver al Men\xfa","orderItems":"Art\xedculos del Pedido","loadingItems":"Cargando art\xedculos del pedido...","qty":"Cant:","totalLabel":"Total (incluye impuestos y promociones)","loading":"Cargando...","statusTitle":"Estado Actual","statusUpdate":"Estado del pedido actualizado: {{status}}","statusError":"Error al actualizar el estado del pedido","loadError":"Error al cargar los art\xedculos del pedido"}}');t.Ay.use(n.A).use(o.r9).init({resources:{en:{translation:s},es:{translation:i}},fallbackLng:"en",interpolation:{escapeValue:!1},returnNull:!1,detection:{order:["localStorage","navigator"],caches:["localStorage"]}})},5819:(e,a,r)=>{"use strict";r.d(a,{EditInfoForm:()=>C});var t=r(5155),o=r(2115),n=r(2596),s=r(9688);function i(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.QP)((0,n.$)(a))}function l(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:i("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}function d(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:i("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-[data-slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...r})}function c(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:i("leading-none font-semibold",a),...r})}function u(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:i("text-muted-foreground text-sm",a),...r})}function m(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:i("px-6",a),...r})}function p(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:i("flex items-center px-6 [.border-t]:pt-6",a),...r})}var g=r(1218);function f(e){let{className:a,type:r,...o}=e;return(0,t.jsx)("input",{type:r,"data-slot":"input",className:i("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...o})}var h=r(2216),b=r(5695),y=r(3464);function C(){let{t:e,i18n:a}=(0,g.Bd)();a.isInitialized||a.changeLanguage("en");let r=(0,b.useRouter)(),[n,s]=(0,o.useState)({username:"",password:"",name:"",phone:""}),[i,C]=(0,o.useState)(""),[v,w]=(0,o.useState)(null),[x,I]=(0,o.useState)(null);(0,o.useEffect)(()=>{y.A.get("http://localhost:8080/currentuserread",{withCredentials:!0}).then(e=>{s({username:e.data.username||"",password:e.data.password||"",name:e.data.name||"",phone:e.data.phone||""}),w(e.data.profileImage)}).catch(e=>{console.error("Error fetching data:",e)})},[]);let E=e=>{s({...n,[e.target.name]:e.target.value})},N=async()=>{w(x),I(null);try{await y.A.post("http://localhost:8080/currentuserpicupdate",{profileImage:x},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){console.error("Error updated pic.",e)}},P=async a=>{a.preventDefault();try{let a=await y.A.post("http://localhost:8080/currentuserupdate",{username:n.username,password:n.password,name:n.name,phone:n.phone},{withCredentials:!0});500===a.status?(alert(e("editInfo.alertFail")),r.push("/dashboard")):200===a.status&&(alert(e("editInfo.alertSuccess")),r.push("/user"))}catch(a){if(console.error("Error during update:",a),y.A.isAxiosError(a)){var t,o,s;C("Error: ".concat(null==(t=a.response)?void 0:t.status,", Message: ").concat((null==(s=a.response)||null==(o=s.data)?void 0:o.message)||a.message))}else C(e("editInfo.errorGeneric"))}};return(0,t.jsx)("div",{className:"flex flex-col items-center bg-gray-100 dark:bg-gray-900 min-h-screen",children:(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 w-full max-w-lg mt-10",children:(0,t.jsxs)(l,{children:[(0,t.jsxs)(d,{className:"space-y-1",children:[(0,t.jsx)(c,{className:"text-3xl font-bold",children:e("editInfo.title")}),(0,t.jsx)(u,{children:e("editInfo.description")})]}),(0,t.jsxs)(m,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2 mb-6",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(r){let e=new FileReader;e.onloadend=()=>{I(e.result)},e.readAsDataURL(r)}},id:"profile-upload",className:"hidden"}),(0,t.jsx)("label",{htmlFor:"profile-upload",className:"cursor-pointer",children:(0,t.jsx)("img",{src:x||v||"https:media.tenor.com/2abbiMqSkOwAAAAM/charlotte-healing-song.gif",alt:"Profile Preview",className:"w-28 h-28 rounded-full border-4 border-gray-200 dark:border-gray-600 object-cover"})}),x&&(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:N,className:"bg-green-500 text-white py-1 px-4 rounded hover:bg-green-600",children:e("editInfo.save")}),(0,t.jsx)("button",{onClick:()=>{I(null)},className:"bg-red-500 text-white py-1 px-4 rounded hover:bg-red-600",children:e("editInfo.cancel")})]})]}),(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"name",children:e("editInfo.name")}),(0,t.jsx)(f,{id:"name",name:"name",type:"text",placeholder:"Name",value:n.name||"",onChange:E})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"username",children:e("editInfo.username")}),(0,t.jsx)(f,{id:"username",name:"username",type:"text",placeholder:"Email",value:n.username||"",onChange:E})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"password",children:e("editInfo.password")}),(0,t.jsx)(f,{id:"password",name:"password",type:"password",placeholder:"Password",value:n.password||"",onChange:E})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.J,{htmlFor:"phone",children:e("editInfo.phone")}),(0,t.jsx)(f,{id:"phone",name:"phone",type:"text",placeholder:"Phone number",value:n.phone||"",onChange:E})]}),(0,t.jsx)(p,{className:"flex flex-col mt-4",children:(0,t.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-6 rounded-md hover:bg-blue-600 transition duration-300",children:e("editInfo.confirm")})})]})]})]})})})}r(388)},9105:(e,a,r)=>{Promise.resolve().then(r.bind(r,5819))}},e=>{var a=a=>e(e.s=a);e.O(0,[464,916,506,441,684,358],()=>a(9105)),_N_E=e.O()}]);
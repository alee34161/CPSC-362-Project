(()=>{var e={};e.id=5,e.ids=[5],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9220:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16189:(e,t,r)=>{"use strict";var s=r(65773);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22724:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34148:(e,t,r)=>{Promise.resolve().then(r.bind(r,70905))},37506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),i=r(48088),n=r(88170),a=r.n(n),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70905)),"/home/andrew-lee/Documents/GitHub/CPSC-362-Project/cafeteria-ordering-system/frontend/src/app/cart/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/andrew-lee/Documents/GitHub/CPSC-362-Project/cafeteria-ordering-system/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/andrew-lee/Documents/GitHub/CPSC-362-Project/cafeteria-ordering-system/frontend/src/app/cart/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},49483:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(60687),i=r(43210),n=r(51060),a=r(16189);function o(){let[e,t]=(0,i.useState)([]),[r,o]=(0,i.useState)(null),[l,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(0),[p,m]=(0,i.useState)(0),x=(0,a.useRouter)(),h=async(e,r)=>{try{await n.A.post("http://localhost:8080/cartupdate",{id:e.id,quantity:r},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){console.error("Error updating cart:",e)}t(t=>t.map(t=>t.id===e.id?{...t,quantity:r}:t))},f=async(e,r)=>{try{await n.A.post("http://localhost:8080/cartcustomupdate",{id:e,customization:r},{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){console.error("Error updating customization in cart.",e)}t(t=>t.map(t=>t.id===e?{...t,customization:r}:t))},b=e.reduce((e,t)=>e+t.price*t.quantity,0),v=.1*b,j=b+v;1===c&&(j-=.15*j),1===p&&(j-=5);let y=async()=>{try{await n.A.post("http://localhost:8080/updatetotal",{cartTotal:j},{headers:{"Content-Type":"application/json"},withCredentials:!0}),x.push("/checkout")}catch(e){console.error("Error updating cart total.")}},P=async e=>{try{await n.A.post("http://localhost:8080/cartitemdelete",{id:e.id},{withCredentials:!0})}catch(e){console.error("Error removing specific item from cart.",e)}t(t=>t.filter(t=>t.id!==e.id))};return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("a",{href:"/dashboard",className:"text-sm font-medium text-blue-600 hover:underline",children:"Back to Menu"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Your Cart"}),(0,s.jsx)("div",{className:"space-y-4",children:0===e.length?(0,s.jsx)("p",{children:"Your cart is empty."}):e.map(e=>(0,s.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("label",{className:"text-sm text-gray-500",children:"Qty:"}),(0,s.jsx)("input",{type:"number",min:1,value:e.quantity,onChange:t=>h(e,parseInt(t.target.value)||1),className:"w-16 p-1 text-center border rounded"})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsxs)("p",{className:"font-semibold",children:["$",(e.price*e.quantity).toFixed(2)]}),(0,s.jsx)("button",{className:"text-sm text-red-600 hover:underline mt-1",onClick:()=>P(e),children:"Delete"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm block mb-1 text-gray-500",children:"Special Request"}),(0,s.jsx)("input",{type:"text",value:e.customization??"",onChange:t=>f(e.id,t.target.value),placeholder:"ex: No onions, no pickles...",className:"w-full p-2 border rounded text-sm"})]})]},e.id))}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl space-y-2 shadow-inner",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{children:["$",b.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Tax (10%)"}),(0,s.jsxs)("span",{children:["$",v.toFixed(2)]})]}),1===c&&(0,s.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,s.jsx)("span",{children:"Subscription Discount (15%)"}),(0,s.jsxs)("span",{children:["-$",(.15*b).toFixed(2)]})]}),1===p&&(0,s.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,s.jsx)("span",{children:"Point Discount"}),(0,s.jsxs)("span",{children:["-$",5]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["$",j.toFixed(2)]})]})]}),e.length>0&&(0,s.jsx)("button",{className:"w-full bg-black text-white py-3 rounded-xl font-semibold hover:bg-gray-800 transition",onClick:y,children:"Proceed to Checkout"})]})}},50532:()=>{},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69092:()=>{},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},70905:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/andrew-lee/Documents/GitHub/CPSC-362-Project/cafeteria-ordering-system/frontend/src/app/cart/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/andrew-lee/Documents/GitHub/CPSC-362-Project/cafeteria-ordering-system/frontend/src/app/cart/page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},87300:(e,t,r)=>{Promise.resolve().then(r.bind(r,49483))},91645:e=>{"use strict";e.exports=require("net")},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>l});var s=r(37413),i=r(2202),n=r.n(i),a=r(64988),o=r.n(a);r(61135);let l={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${n().variable} ${o().variable} antialiased`,children:e})})}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,169,658,60],()=>r(37506));module.exports=s})();